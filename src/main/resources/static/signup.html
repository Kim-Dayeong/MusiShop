<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head th:replace="~{fragment/header::headerFragment(~{::title})}">
    <title th:text="회원가입"></title>
</head>
<body>

<th:block layout:fragment="content">
    <h2>회원 가입</h2>
    <div>

            <div>
                <div>아이디</div>
                <input id="id" type="text" name="id"/>
            </div>
            <div>
                <div>비밀번호</div>
                <input id="pwd" type="pwd" name="pwd"/>
            </div>

            <div>
                <div>이름</div>
                <input id="name" type="text" name="name"/>
            </div>

        <div>
            <div>이메일</div>
            <input id="email" type="text" name="email"/>
        </div>





            <input class="btn" type="submit" value="회원가입">


    </div>

</th:block>

<th:block layout:fragment="script">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script type="text/javascript">
        $(function () {
            $('.btn').click((e) => {
                const id = $('#id').val();
                const password = $('#pwd').val();
                const confirmPassword = $('#confirmPassword').val()
                const name = $('#name').val();
                const email = $('#email').val();

                    const path = 'http://localhost:8083/signup';
                    const json = ({
                        'id': id,
                        'pwd': confirmPassword,
                        'name': name,
                        'email': email

                    });
                    $.ajax({
                        url: path,
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(json),
                    }).done((response) => {
                        if (response == 'success') {
                            alert('회원가입 성공')

                        } else if (response == 'fail') {
                            alert('아이디를 변경하세요.');
                        } else {
                            alert('회원가입 실패');
                        }
                    });

            });
        });
    </script>
</th:block>
</body>
</html>